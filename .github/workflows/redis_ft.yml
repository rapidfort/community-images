name: Redis Functional Test

on:
  schedule:
  - cron: '0 */4 * * *'

  workflow_dispatch:

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - name: Start minikube
        uses: medyagh/setup-minikube@master
      - name: Check k8s cluster !
        run: kubectl get pods -A
      - name: Setup ubuntu
        run: ./scripts/setup.sh --functional yes
      - name: Run functional test
        run: ./community_images/redis/bitnami/functional_test.sh
